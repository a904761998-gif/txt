/* 对话可视化模块 - 紫色优雅风格 */
body { 
  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif; 
  padding: 0; 
  margin: 0; 
  background: linear-gradient(135deg, #ede7f6 0%, #f3e5f5 100%);
  color: #2F3C4B; 
  height: 100vh; 
  box-sizing: border-box; 
  display: flex; 
  flex-direction: column; 
}

.container {
  display: flex;
  flex: 1;
  height: 100%;
  position: relative;
  --header-divider-y: 42px;
  --header-divider-color: rgba(156, 39, 176, 0.2);
}

.container::before {
  content: '';
  position: absolute;
  left: 0;
  right: 0;
  top: var(--header-divider-y);
  height: 2px;
  background: var(--header-divider-color);
  pointer-events: none;
}

.left, .right {
  height: 100%;
  overflow: hidden;
  padding: 10px 14px;
  box-sizing: border-box;
}
.left {
  width: 50%;
  background: #ffffff;
  position: relative;
  min-width: 0;
  border-right: 0;
  display: flex;
  flex-direction: column;
}
.right {
  flex: 1;
  background: #ffffff;
  display: flex;
  flex-direction: column;
}

::-webkit-scrollbar {
  width: 10px;
}

::-webkit-scrollbar-track {
  background: #f3e5f5;
}

::-webkit-scrollbar-thumb {
  background: linear-gradient(135deg, #ba68c8 0%, #ce93d8 100%);
  border-radius: 10px;
}

::-webkit-scrollbar-thumb:hover {
  background: linear-gradient(135deg, #ab47bc 0%, #ba68c8 100%);
}

#jsonInput {
  width: 100%;
  max-width: 100%;
  flex: 1;
  height: auto;
  border: 2px solid rgba(156, 39, 176, 0.3);
  border-radius: 12px;
  outline: none;
  resize: none;
  font-size: 14px;
  line-height: 1.8;
  background: #ffffff;
  font-family: "Courier New", Courier, monospace;
  color: #333;
  padding: 14px;
  box-sizing: border-box;
  display: block;
  overflow-x: hidden;
  transition: all 0.3s ease;
  box-shadow: 0 2px 8px rgba(156, 39, 176, 0.1);
}

#jsonInput:focus {
  border-color: #9c27b0;
  box-shadow: 0 0 0 4px rgba(156, 39, 176, 0.15), 0 2px 8px rgba(156, 39, 176, 0.2);
}

.actions {
  position: absolute;
  bottom: 20px;
  left: 20px;
  right: 20px;
  display: flex;
  gap: 10px;
  justify-content: flex-end;
}

.actions button {
  padding: 8px 16px;
  font-size: 12px;
  font-weight: 600;
  border: 1px solid rgba(156, 39, 176, 0.4);
  border-radius: 10px;
  background: rgba(156, 39, 176, 0.25);
  backdrop-filter: blur(10px);
  color: #6a1b9a;
  cursor: pointer;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}

.actions button:hover {
  transform: translateY(-2px);
  box-shadow: 0 4px 12px rgba(156, 39, 176, 0.3);
  background: rgba(156, 39, 176, 0.35);
}

.resizer {
  width: 6px;
  cursor: col-resize;
  background: linear-gradient(135deg, rgba(156, 39, 176, 0.3), rgba(186, 104, 200, 0.3));
  z-index: 10;
  transition: all 0.3s ease;
  position: relative;
}

.resizer::after {
  content: '';
  position: absolute;
  top: 50%;
  left: 50%;
  width: 2px;
  height: 36px;
  transform: translate(-50%, -50%);
  border-radius: 999px;
  background: rgba(255, 255, 255, 0.85);
  box-shadow: 0 0 0 1px rgba(0,0,0,0.06);
}

.resizer:hover {
  background: linear-gradient(135deg, #9c27b0, #ba68c8);
  width: 8px;
}

.header {
  margin-top: 0;
  margin-bottom: 6px;
  padding-bottom: 6px;
  border-bottom: 0;
  color: #6a1b9a;
}

.header h2 {
  margin: 0;
  padding: 0;
  line-height: 1.2;
}

.dialogue-container {
  width: 100%;
  flex: 1;
  overflow: auto;
  background: #ffffff;
  border: 2px solid rgba(156, 39, 176, 0.18);
  border-radius: 12px;
  box-shadow: 0 2px 8px rgba(156, 39, 176, 0.08);
  padding: 12px;
}

.message {
  display: flex;
  margin: 15px 0;
}

.bubble {
  padding: 12px 16px;
  border-radius: 18px;
  max-width: 80%;
  line-height: 1.5;
  word-break: break-word;
  box-shadow: 0 2px 6px rgba(0, 0, 0, 0.05);
}

.user {
  justify-content: flex-start;
}

.user .bubble {
  background-color: #e1bee7;
  border-bottom-left-radius: 5px;
  color: #4a148c;
}

.assistant {
  justify-content: flex-end;
}

.assistant .bubble {
  background-color: #f5f5f5;
  border-bottom-right-radius: 5px;
  color: #2F3C4B;
}

.role-label {
  font-size: 0.9em;
  margin-bottom: 8px;
  font-weight: 700;
  padding: 4px 12px;
  border-radius: 20px;
  display: inline-block;
}

.user .role-label {
  background-color: #9c27b0;
  color: white;
}

.assistant .role-label {
  background-color: #1976d2;
  color: white;
}

.image-container {
  margin-top: 10px;
}

.image-container img {
  max-width: 100%;
  border-radius: 8px;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
  margin-top: 5px;
}

/* 海洋主题 */
body.ocean-theme {
  background: linear-gradient(135deg, #e3f2fd 0%, #bbdefb 100%);
}

body.ocean-theme .left {
  border-right: 3px solid rgba(33, 150, 243, 0.2);
}

body.ocean-theme #jsonInput {
  border: 2px solid rgba(33, 150, 243, 0.3);
  box-shadow: 0 2px 8px rgba(33, 150, 243, 0.1);
}

body.ocean-theme #jsonInput:focus {
  border-color: #2196f3;
  box-shadow: 0 0 0 4px rgba(33, 150, 243, 0.15), 0 2px 8px rgba(33, 150, 243, 0.2);
}

body.ocean-theme ::-webkit-scrollbar-track {
  background: #e3f2fd;
}

body.ocean-theme ::-webkit-scrollbar-thumb {
  background: linear-gradient(135deg, #64b5f6 0%, #90caf9 100%);
}

body.ocean-theme ::-webkit-scrollbar-thumb:hover {
  background: linear-gradient(135deg, #42a5f5 0%, #64b5f6 100%);
}

body.ocean-theme .actions button {
  border: 1px solid rgba(33, 150, 243, 0.4);
  background: rgba(33, 150, 243, 0.25);
  color: #0d47a1;
}

body.ocean-theme .actions button:hover {
  box-shadow: 0 4px 12px rgba(33, 150, 243, 0.3);
  background: rgba(33, 150, 243, 0.35);
}

body.ocean-theme .resizer {
  background: linear-gradient(135deg, rgba(33, 150, 243, 0.3), rgba(100, 181, 246, 0.3));
}

body.ocean-theme .resizer:hover {
  background: linear-gradient(135deg, #2196f3, #64b5f6);
}

body.ocean-theme .header {
  border-bottom: 2px solid rgba(33, 150, 243, 0.2);
  color: #0d47a1;
}

body.ocean-theme .user .bubble {
  background-color: #bbdefb;
  color: #0d47a1;
}

body.ocean-theme .user .role-label {
  background-color: #2196f3;
  color: white;
}

body.ocean-theme .assistant .role-label {
  background-color: #0d47a1;
  color: white;
}

/* 日落主题 */
body.sunset-theme {
  background: linear-gradient(135deg, #fce4ec 0%, #f8bbd0 100%);
}

body.sunset-theme .left {
  border-right: 3px solid rgba(233, 30, 99, 0.2);
}

body.sunset-theme #jsonInput {
  border: 2px solid rgba(233, 30, 99, 0.3);
  box-shadow: 0 2px 8px rgba(233, 30, 99, 0.1);
}

body.sunset-theme #jsonInput:focus {
  border-color: #e91e63;
  box-shadow: 0 0 0 4px rgba(233, 30, 99, 0.15), 0 2px 8px rgba(233, 30, 99, 0.2);
}

body.sunset-theme ::-webkit-scrollbar-track {
  background: #fce4ec;
}

body.sunset-theme ::-webkit-scrollbar-thumb {
  background: linear-gradient(135deg, #f48fb1 0%, #f8bbd0 100%);
}

body.sunset-theme ::-webkit-scrollbar-thumb:hover {
  background: linear-gradient(135deg, #f06292 0%, #f48fb1 100%);
}

body.sunset-theme .actions button {
  border: 1px solid rgba(233, 30, 99, 0.4);
  background: rgba(233, 30, 99, 0.25);
  color: #880e4f;
}

body.sunset-theme .actions button:hover {
  box-shadow: 0 4px 12px rgba(233, 30, 99, 0.3);
  background: rgba(233, 30, 99, 0.35);
}

body.sunset-theme .resizer {
  background: linear-gradient(135deg, rgba(233, 30, 99, 0.3), rgba(244, 143, 177, 0.3));
}

body.sunset-theme .resizer:hover {
  background: linear-gradient(135deg, #e91e63, #f48fb1);
}

body.sunset-theme .header {
  border-bottom: 2px solid rgba(233, 30, 99, 0.2);
  color: #880e4f;
}

body.sunset-theme .user .bubble {
  background-color: #f8bbd0;
  color: #880e4f;
}

body.sunset-theme .user .role-label {
  background-color: #e91e63;
  color: white;
}

body.sunset-theme .assistant .role-label {
  background-color: #880e4f;
  color: white;
}

/* 森林主题 */
body.forest-theme {
  background: linear-gradient(135deg, #e8f5e9 0%, #c8e6c9 100%);
}

body.forest-theme .left {
  border-right: 3px solid rgba(67, 160, 71, 0.2);
}

body.forest-theme #jsonInput {
  border: 2px solid rgba(67, 160, 71, 0.3);
  box-shadow: 0 2px 8px rgba(67, 160, 71, 0.1);
}

body.forest-theme #jsonInput:focus {
  border-color: #43a047;
  box-shadow: 0 0 0 4px rgba(67, 160, 71, 0.15), 0 2px 8px rgba(67, 160, 71, 0.2);
}

body.forest-theme ::-webkit-scrollbar-track {
  background: #e8f5e9;
}

body.forest-theme ::-webkit-scrollbar-thumb {
  background: linear-gradient(135deg, #81c784 0%, #a5d6a7 100%);
}

body.forest-theme ::-webkit-scrollbar-thumb:hover {
  background: linear-gradient(135deg, #66bb6a 0%, #81c784 100%);
}

body.forest-theme .actions button {
  border: 1px solid rgba(67, 160, 71, 0.4);
  background: rgba(67, 160, 71, 0.25);
  color: #1b5e20;
}

body.forest-theme .actions button:hover {
  box-shadow: 0 4px 12px rgba(67, 160, 71, 0.3);
  background: rgba(67, 160, 71, 0.35);
}

body.forest-theme .resizer {
  background: linear-gradient(135deg, rgba(67, 160, 71, 0.3), rgba(129, 199, 132, 0.3));
}

body.forest-theme .resizer:hover {
  background: linear-gradient(135deg, #43a047, #81c784);
}

body.forest-theme .header {
  border-bottom: 2px solid rgba(67, 160, 71, 0.2);
  color: #1b5e20;
}

body.forest-theme .user .bubble {
  background-color: #c8e6c9;
  color: #1b5e20;
}

body.forest-theme .user .role-label {
  background-color: #43a047;
  color: white;
}

body.forest-theme .assistant .role-label {
  background-color: #1b5e20;
  color: white;
}

body.theme-aurora { background: linear-gradient(135deg, #e0f7fa 0%, #ede7f6 50%, #fce4ec 100%); color:#1f2d3d; }
body.theme-aurora .left { border-right: 0; }
body.theme-aurora #jsonInput { border: 2px solid rgba(79,195,247,0.35); box-shadow: 0 2px 8px rgba(79,195,247,0.1); }
body.theme-aurora #jsonInput:focus { border-color:#4fc3f7; box-shadow: 0 0 0 4px rgba(79,195,247,0.15), 0 2px 8px rgba(79,195,247,0.2); }
body.theme-aurora .resizer { background: linear-gradient(135deg, rgba(79,195,247,0.3), rgba(171,71,188,0.3)); }
body.theme-aurora .resizer:hover { background: linear-gradient(135deg, #4fc3f7, #ab47bc); }
body.theme-aurora .header { border-bottom: 0; color:#1565c0; }
body.theme-aurora .dialogue-container { border-color: rgba(79,195,247,0.28); }
body.theme-aurora .container { --header-divider-color: rgba(79,195,247,0.25); }
body.theme-aurora .actions button { border: 1px solid rgba(79,195,247,0.4); background: rgba(79,195,247,0.25); color: #1565c0; }
body.theme-aurora .actions button:hover { box-shadow: 0 4px 12px rgba(79,195,247,0.3); background: rgba(79,195,247,0.35); }
body.theme-aurora .user .role-label { background-color: #4fc3f7; color: white; }
body.theme-aurora .assistant .role-label { background-color: #8e24aa; color: white; }
body.theme-aurora ::-webkit-scrollbar-track { background: #e0f7fa; }
body.theme-aurora ::-webkit-scrollbar-thumb { background: linear-gradient(135deg, #4fc3f7, #ab47bc); }

body.theme-sakura { background: linear-gradient(135deg, #fff1f1 0%, #ffe4ec 50%, #fffafa 100%); color:#4a2e2b; }
body.theme-sakura .left { border-right: 0; }
body.theme-sakura #jsonInput { border: 2px solid rgba(233,30,99,0.3); box-shadow: 0 2px 8px rgba(233,30,99,0.1); }
body.theme-sakura #jsonInput:focus { border-color: #e91e63; box-shadow: 0 0 0 4px rgba(233,30,99,0.15), 0 2px 8px rgba(233,30,99,0.2); }
body.theme-sakura .resizer { background: linear-gradient(135deg, rgba(244,143,177,0.3), rgba(240,98,146,0.3)); }
body.theme-sakura .resizer:hover { background: linear-gradient(135deg, #f48fb1, #ec407a); }
body.theme-sakura .header { border-bottom: 0; color:#e91e63; }
body.theme-sakura .dialogue-container { border-color: rgba(233,30,99,0.22); }
body.theme-sakura .container { --header-divider-color: rgba(233,30,99,0.25); }
body.theme-sakura .actions button { border: 1px solid rgba(233,30,99,0.4); background: rgba(233,30,99,0.25); color: #7b1fa2; }
body.theme-sakura .actions button:hover { box-shadow: 0 4px 12px rgba(233,30,99,0.3); background: rgba(233,30,99,0.35); }
body.theme-sakura .user .role-label { background-color: #f48fb1; color: white; }
body.theme-sakura .assistant .role-label { background-color: #8e24aa; color: white; }
body.theme-sakura ::-webkit-scrollbar-track { background: #fff1f1; }
body.theme-sakura ::-webkit-scrollbar-thumb { background: linear-gradient(135deg, #f48fb1, #ec407a); }

body.theme-cyberpunk { background: linear-gradient(135deg, #0f172a 0%, #111827 50%, #1f2937 100%); color:#e5e7eb; }
body.theme-cyberpunk .left { border-right: 0; }
body.theme-cyberpunk #jsonInput { border: 2px solid rgba(139,92,246,0.45); box-shadow: 0 2px 8px rgba(2,6,23,0.8); }
body.theme-cyberpunk #jsonInput:focus { border-color:#8b5cf6; box-shadow: 0 0 0 4px rgba(139,92,246,0.18); }
body.theme-cyberpunk .resizer { background: linear-gradient(135deg, rgba(139,92,246,0.35), rgba(167,139,250,0.35)); }
body.theme-cyberpunk .resizer:hover { background: linear-gradient(135deg, #8b5cf6, #d946ef); }
body.theme-cyberpunk .header { border-bottom: 0; color:#a78bfa; }
body.theme-cyberpunk .dialogue-container { background: #ffffff; border-color: rgba(139,92,246,0.35); }
body.theme-cyberpunk .container { --header-divider-color: rgba(139,92,246,0.35); }
body.theme-cyberpunk .actions button { border: 1px solid rgba(139,92,246,0.5); background: rgba(139,92,246,0.25); color: #a78bfa; }
body.theme-cyberpunk .actions button:hover { box-shadow: 0 4px 12px rgba(139,92,246,0.35); background: rgba(139,92,246,0.35); }
body.theme-cyberpunk .bubble { color: #111827; }
body.theme-cyberpunk .assistant .bubble { color: #111827; }
body.theme-cyberpunk .user .role-label { background-color: #22d3ee; color: #0f172a; }
body.theme-cyberpunk .assistant .role-label { background-color: #f43f5e; color: #0f172a; }
body.theme-cyberpunk ::-webkit-scrollbar-track { background: #0f172a; }
body.theme-cyberpunk ::-webkit-scrollbar-thumb { background: linear-gradient(135deg, #8b5cf6, #d946ef); }

body.theme-royal { background: linear-gradient(135deg, #0d0d0d 0%, #121212 50%, #1a1a1a 100%); color:#f5f5dc; }
body.theme-royal .left { border-right: 0; }
body.theme-royal #jsonInput { border: 2px solid rgba(255,215,0,0.45); }
body.theme-royal #jsonInput:focus { border-color: #ffd700; box-shadow: 0 0 0 4px rgba(255,215,0,0.15), 0 2px 8px rgba(255,215,0,0.2); }
body.theme-royal .resizer { background: linear-gradient(135deg, rgba(255,215,0,0.35), rgba(197,157,95,0.35)); }
body.theme-royal .resizer:hover { background: linear-gradient(135deg, #ffd700, #c59d5f); }
body.theme-royal .header { border-bottom: 0; color:#ffd700; }
body.theme-royal .dialogue-container { background: #ffffff; border-color: rgba(255,215,0,0.35); }
body.theme-royal .container { --header-divider-color: rgba(255,215,0,0.35); }
body.theme-royal .actions button { border: 1px solid rgba(255,215,0,0.5); background: rgba(255,215,0,0.25); color: #c59d5f; }
body.theme-royal .actions button:hover { box-shadow: 0 4px 12px rgba(255,215,0,0.3); background: rgba(255,215,0,0.35); }
body.theme-royal .bubble { color: #111827; }
body.theme-royal .assistant .bubble { color: #111827; }
body.theme-royal .user .role-label { background-color: #ffd700; color: #1a1a1a; }
body.theme-royal .assistant .role-label { background-color: #c59d5f; color: #1a1a1a; }
body.theme-royal ::-webkit-scrollbar-track { background: #0d0d0d; }
body.theme-royal ::-webkit-scrollbar-thumb { background: linear-gradient(135deg, #ffd700, #c59d5f); }

body.theme-mint { background: linear-gradient(135deg, #e8f5e9 0%, #e0f2f1 50%, #f1f8e9 100%); color:#2f3c4b; }
body.theme-mint .left { border-right: 0; }
body.theme-mint #jsonInput { border: 2px solid rgba(76,175,80,0.35); }
body.theme-mint #jsonInput:focus { border-color: #4caf50; box-shadow: 0 0 0 4px rgba(76,175,80,0.15), 0 2px 8px rgba(76,175,80,0.2); }
body.theme-mint .resizer { background: linear-gradient(135deg, rgba(102,187,106,0.35), rgba(38,166,154,0.35)); }
body.theme-mint .resizer:hover { background: linear-gradient(135deg, #66bb6a, #26a69a); }
body.theme-mint .header { border-bottom: 0; color:#2e7d32; }
body.theme-mint .dialogue-container { border-color: rgba(76,175,80,0.25); }
body.theme-mint .container { --header-divider-color: rgba(76,175,80,0.25); }
body.theme-mint .actions button { border: 1px solid rgba(76,175,80,0.4); background: rgba(76,175,80,0.25); color: #2e7d32; }
body.theme-mint .actions button:hover { box-shadow: 0 4px 12px rgba(76,175,80,0.3); background: rgba(76,175,80,0.35); }
body.theme-mint .user .role-label { background-color: #66bb6a; color: white; }
body.theme-mint .assistant .role-label { background-color: #2bbbad; color: white; }
body.theme-mint ::-webkit-scrollbar-track { background: #e8f5e9; }
